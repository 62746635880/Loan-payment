<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Transaction Confirmation</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.fade-out { animation: fadeOut 3s forwards; }
@keyframes fadeOut { from {opacity:1;} to {opacity:0;} }
</style>
</head>
<body class="bg-gradient-to-r from-indigo-50 to-purple-50 min-h-screen flex flex-col items-center justify-center p-4">

<div id="confirmationContainer" class="max-w-md w-full bg-white rounded-3xl shadow-2xl p-8 border border-gray-200 text-center">

  <!-- Header with Countdown -->
  <div class="flex justify-between items-center mb-4 
              bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 
              p-4 rounded-2xl shadow-lg text-white">
    <h1 id="appName" class="text-3xl font-extrabold"></h1>
    <div class="text-white font-medium text-lg">Time Left: <span id="timer">09:00</span></div>
  </div>

  <p id="clientName" class="text-xl font-semibold text-gray-700 mb-2"></p>
  <p id="amount" class="text-2xl font-bold text-green-600 mb-4"></p>

  <div class="mt-6 p-4 bg-green-100 text-green-800 rounded-2xl shadow text-left">
    Dear <span id="clientSpan"></span>, your transaction is <strong>Under Review</strong>. After confirmation, you will receive the NOC for loan closing.
  </div>

</div>

<div id="expiredContainer" class="hidden w-full max-w-md bg-white rounded-3xl shadow-2xl p-8 border border-gray-200 text-center">
  <h1 class="text-3xl font-bold text-red-600 mb-4">Page Expired</h1>
  <p class="text-gray-700">Your session has expired. Please generate a new link to complete the transaction.</p>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const app = params.get('app') || 'Payment';
const client = params.get('pn') || 'Customer';
const amount = params.get('am') || '0';
const expiryParam = params.get('expiry');

document.getElementById('appName').innerText = decodeURIComponent(app);
document.getElementById('clientName').innerText = decodeURIComponent(client);
document.getElementById('amount').innerText = `â‚¹${decodeURIComponent(amount)}`;
document.getElementById('clientSpan').innerText = decodeURIComponent(client);

// Countdown timer
const timerElement = document.getElementById('timer');
const expiryTime = expiryParam ? parseInt(expiryParam) : Date.now() + 9*60*1000;

const countdown = setInterval(() => {
  const now = Date.now();
  let remaining = Math.floor((expiryTime - now)/1000);
  if (remaining <= 0) {
    clearInterval(countdown);
    document.getElementById('confirmationContainer').classList.add('hidden');
    document.getElementById('expiredContainer').classList.remove('hidden');
    return;
  }
  const minutes = Math.floor(remaining/60);
  const seconds = remaining % 60;
  timerElement.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
}, 1000);
</script>
</body>
</html>
